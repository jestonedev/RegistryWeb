@model RegistryWeb.ViewModel.RestrictionVM;
@using RegistryWeb.Extensions;
@using RegistryWeb.ViewOptions;
@using RegistryWeb.Models.Entities;
@using RegistryWeb.SecurityServices;
@using RegistryWeb.DataHelpers;

@{ 
    var attachment = Model.AddressType == AddressTypes.Premise ? "Помещение" : "Здание";
    var restrictionTypeClass = "col-md-6 col-lg-6";
    if (ViewBag.Action == "Edit" || ViewBag.Action == "Create")
    {
        if (ViewBag.AddressType == AddressTypes.Building)
        {
            restrictionTypeClass = "col-md-6 col-lg-10";
        }
    }
    if (ViewBag.Action == "Details" || ViewBag.Action == "Delete")
    {
        if (ViewBag.AddressType == AddressTypes.Premise)
        {
            restrictionTypeClass = "col-md-6 col-lg-8";
        } else
        {
            restrictionTypeClass = "col-md-12 col-lg-12";
        }
    }
}

<li class="list-group-item">
    <input type="hidden" value="@Model.IdRestriction" name="IdRestriction" />
    <div class="form-row">
        <div class="form-group col-sm-6 col-md-3 col-lg-2">
            <label>Номер документа</label>
            <input type="text" maxlength="10" class="form-control" disabled value="@Model.Number" name="RestrictionNum" title="Номер документа">
        </div>
        <div class="form-group col-sm-6 col-md-3 col-lg-2">
            <label>Дата документа</label>
            <input type="date" class="form-control" disabled value="@(Model.Date.ToString("yyyy-MM-dd") == "0001-01-01" ? "" : Model.Date.ToString("yyyy-MM-dd"))" name="RestrictionDate" title="Дата документа">
        </div>
        <div class="form-group col-md-6 col-lg-8">
            <label>Наименование</label>
            <input type="text" maxlength="255" class="form-control" disabled value="@Model.Description" name="RestrictionDescription" title="Наименование">
        </div>
        @if (ViewBag.AddressType == AddressTypes.Premise)
        {
            <div class="form-group col-md-6 col-lg-4">
                <label>Принадлежность</label>

                <input type="text" maxlength="255" class="form-control" disabled value="@attachment" name="RestrictionAttachment" title="Принадлежность">
            </div>
        }
        <div class="form-group @restrictionTypeClass">
            <label>Тип документа</label>
            <select disabled class="form-control field-restriction selectpicker" title="Тип документа"
                    asp-items="@{new SelectList(ViewBag.RestrictionTypes, "IdRestrictionType", "RestrictionTypeName",Model.IdRestrictionType)}" name="IdRetrctionType">
                <option></option>
            </select>   
        </div>
        @if (ViewBag.Action == "Edit")
        {
            <div class="text-lg-right text-center col-lg-2 rr-restriction-edit-buttons">
                <div class="btn-group yes-no-panel" role="group" aria-label="Панель подтверждения">
                    <a class="btn btn-danger restriction-cancel-btn @(ViewBag.AddressType == Model.AddressType ? "" : "disabled")" title="Нет" aria-label="Нет" href="#"><span class="oi oi-x"></span></a>
                    <a class="btn btn-success restriction-save-btn @(ViewBag.AddressType == Model.AddressType ? "" : "disabled")" title="Да" aria-label="Да" href="#"><span class="oi oi-check"></span></a>
                </div>
                <div class="btn-group edit-del-panel" role="group" aria-label="Панель реадктирования">
                    <a class="btn btn-primary restriction-edit-btn @(ViewBag.AddressType == Model.AddressType ? "" : "disabled")" title="Редактировать" aria-label="Редактировать" href="#"><span class="oi oi-pencil"></span></a>
                    <a class="btn btn-danger restriction-delete-btn @(ViewBag.AddressType == Model.AddressType ? "" : "disabled")" title="Удалить" aria-label="Удалить" href="#"><span class="oi oi-x delete"></span></a>
                </div>
            </div>
        }
        @if (ViewBag.Action == "Create")
        {
            <a class="restriction-edit-btn" style="display: none"></a>
            <div class="text-lg-right text-center col-lg-2 rr-restriction-edit-buttons">
                <div class="btn-group yes-no-panel" role="group" aria-label="Панель подтверждения">
                    <a class="btn btn-danger restriction-cancel-btn" title="Нет" aria-label="Нет" href="#"><span class="oi oi-x"></span></a>
                </div>
            </div>
        }
    </div>
</li>
